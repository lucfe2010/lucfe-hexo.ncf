<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>docker - Lucfe Knowledge Documentation</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Lucfe Knowledge Documentation"><meta name="msapplication-TileImage" content="/assets/images/favicon_l.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Lucfe Knowledge Documentation"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="配置文件、启动命令应用程序、环境变量第三方软件库和依赖包运行时环境操作系统 例子前端 Vue后端 SprintBootDB MySql 开发环境、测试环境 NodeJSnpm依赖java运行时环境第三方依赖（springboot）mysql数据库环境变量、启动脚本配置Redis（缓存）配置Nginx 原理虚拟机 docker  New Linux installations, installed"><meta property="og:type" content="blog"><meta property="og:title" content="docker"><meta property="og:url" content="https://ncf2010.us.kg/0004%20Formal%20science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E6%8A%80%E6%9C%AF%20Computer%20science/Software%20organization/unix/docker/"><meta property="og:site_name" content="Lucfe Knowledge Documentation"><meta property="og:description" content="配置文件、启动命令应用程序、环境变量第三方软件库和依赖包运行时环境操作系统 例子前端 Vue后端 SprintBootDB MySql 开发环境、测试环境 NodeJSnpm依赖java运行时环境第三方依赖（springboot）mysql数据库环境变量、启动脚本配置Redis（缓存）配置Nginx 原理虚拟机 docker  New Linux installations, installed"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://ncf2010.us.kg/assets/images/docker/image.png"><meta property="og:image" content="https://ncf2010.us.kg/assets/images/docker/image-1.png"><meta property="og:image" content="https://ncf2010.us.kg/assets/images/docker/image-2.png"><meta property="og:image" content="https://ncf2010.us.kg/assets/images/docker/image-4.png"><meta property="og:image" content="https://ncf2010.us.kg/assets/images/docker/image-3.png"><meta property="og:image" content="https://ncf2010.us.kg/assets/images/docker/image-5.png"><meta property="og:image" content="https://ncf2010.us.kg/assets/images/docker/image-6.png"><meta property="og:image" content="https://ncf2010.us.kg/assets/images/docker/image-7.png"><meta property="article:published_time" content="2024-02-26T07:20:18.475Z"><meta property="article:modified_time" content="2023-11-05T04:54:53.811Z"><meta property="article:author" content="lucfe"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://ncf2010.us.kg/assets/images/docker/image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ncf2010.us.kg/0004%20Formal%20science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E6%8A%80%E6%9C%AF%20Computer%20science/Software%20organization/unix/docker/"},"headline":"docker","image":["https://ncf2010.us.kg/assets/images/docker/image.png","https://ncf2010.us.kg/assets/images/docker/image-1.png","https://ncf2010.us.kg/assets/images/docker/image-2.png","https://ncf2010.us.kg/assets/images/docker/image-4.png","https://ncf2010.us.kg/assets/images/docker/image-3.png","https://ncf2010.us.kg/assets/images/docker/image-5.png","https://ncf2010.us.kg/assets/images/docker/image-6.png","https://ncf2010.us.kg/assets/images/docker/image-7.png"],"datePublished":"2024-02-26T07:20:18.475Z","dateModified":"2023-11-05T04:54:53.811Z","author":{"@type":"Person","name":"lucfe"},"publisher":{"@type":"Organization","name":"Lucfe Knowledge Documentation","logo":{"@type":"ImageObject","url":{"text":"Lucfe Knowledges"}}},"description":"配置文件、启动命令应用程序、环境变量第三方软件库和依赖包运行时环境操作系统 例子前端 Vue后端 SprintBootDB MySql 开发环境、测试环境 NodeJSnpm依赖java运行时环境第三方依赖（springboot）mysql数据库环境变量、启动脚本配置Redis（缓存）配置Nginx 原理虚拟机 docker  New Linux installations, installed"}</script><link rel="canonical" href="https://ncf2010.us.kg/0004%20Formal%20science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E6%8A%80%E6%9C%AF%20Computer%20science/Software%20organization/unix/docker/"><link rel="alternate" href="https://ncf2010.us.kg/atom.xml" title="Lucfe Knowledge Documentation" type="application/atom+xml"><link rel="icon" href="/assets/images/favicon_l.png"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Lucfe Knowledges</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-02-26T07:20:18.475Z" title="2024/2/26 15:20:18">2024-02-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-11-05T04:54:53.811Z" title="2023/11/5 12:54:53">2023-11-05</time></span><span class="level-item">11 minutes read (About 1591 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">docker</h1><div class="content"><p>配置文件、启动命令<br>应用程序、环境变量<br>第三方软件库和依赖包<br>运行时环境<br>操作系统</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>前端 Vue<br>后端 SprintBoot<br>DB MySql</p>
<p>开发环境、测试环境</p>
<p>NodeJS<br>npm依赖<br>java运行时环境<br>第三方依赖（springboot）<br>mysql数据库<br>环境变量、启动脚本<br>配置Redis（缓存）<br>配置Nginx</p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>虚拟机<br><img src="/assets/images/docker/image.png" alt="Alt text"></p>
<p>docker<br><img src="/assets/images/docker/image-1.png" alt="Alt text"></p>
<p><img src="/assets/images/docker/image-2.png" alt="Alt text"></p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>New Linux installations, installed using the wsl –install command, will be set to WSL 2 by default.</p>
<p>You can list your installed Linux distributions and check the version of WSL each is set to by entering the command: wsl -l -v in PowerShell or Windows Command Prompt.</p>
<p>To change or reset your password, open the Linux distribution and enter the command: passwd. You will be asked to enter your current password, then asked to enter your new password, and then to confirm your new password.</p>
<hr>
<p>If you forgot the password for your Linux distribution:</p>
<p>Open PowerShell and enter the root of your default WSL distribution using the command: wsl -u root</p>
<p>If you need to update the forgotten password on a distribution that is not your default, use the command: wsl -d Debian -u root, replacing Debian with the name of your targeted distribution.</p>
<p>Once your WSL distribution has been opened at the root level inside PowerShell, you can use this command to update your password: passwd <code>&lt;username&gt;</code> where <code>&lt;username&gt;</code> is the username of the account in the distribution whose password you’ve forgotten.</p>
<p>You will be prompted to enter a new UNIX password and then confirm that password. Once you’re told that the password has updated successfully, close WSL inside of PowerShell using the command: exit.</p>
<hr>
<p><code>wsl --shutdown</code></p>
<hr>
<p>Install VS Code and the WSL extension</p>
<p>Install the Remote Development extension pack. This extension pack includes the WSL extension, in addition to the Remote - SSH, and Dev Containers extensions, enabling you to open any folder in a container, on a remote machine, or in WSL.</p>
<p>This Remote Development extension pack includes four extensions:</p>
<p>Remote - SSH - Work with source code in any location by opening folders on a remote machine&#x2F;VM using SSH. Supports x86_64, ARMv7l (AArch32), and ARMv8l (AArch64) glibc-based Linux, Windows 10&#x2F;Server (1803+), and macOS 10.14+ (Mojave) SSH hosts.<br>Remote - Tunnels - Work with source code in any location by opening folders on a remote machine&#x2F;VM using a VS Code Tunnel (rather than SSH).<br>Dev Containers - Work with a separate toolchain or container based application by opening any folder mounted into or inside a container.<br>WSL - Get a Linux-powered development experience from the comfort of Windows by opening any folder in the Windows Subsystem for Linux.</p>
<hr>
<p>Install Docker Desktop on Windows</p>
<p>When prompted, ensure the Use WSL 2 instead of Hyper-V option on the Configuration page is selected or not depending on your choice of backend.</p>
<p>If your system only supports one of the two options, you will not be able to select which backend to use.</p>
<hr>
<h2 id="dockfile"><a href="#dockfile" class="headerlink" title="dockfile"></a>dockfile</h2><p>docker compose</p>
<h2 id="example"><a href="#example" class="headerlink" title="example"></a>example</h2><p>Create an empty project directory.</p>
<p>cd my_wordpress&#x2F;</p>
<p>Create a docker-compose.yml file that starts your WordPress blog and a separate MySQL instance with volume mounts for data persistence:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="comment"># We use a mariadb image which supports both amd64 &amp; arm64 architecture</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mariadb:10.6.4-focal</span></span><br><span class="line">    <span class="comment"># If you really want to use MySQL, uncomment the following line</span></span><br><span class="line">    <span class="comment">#image: mysql:8.0.27</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">&#x27;--default-authentication-plugin=mysql_native_password&#x27;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db_data:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=somewordpress</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_DATABASE=wordpress</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_USER=wordpress</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_PASSWORD=wordpress</span></span><br><span class="line">    <span class="attr">expose:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3306</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">33060</span></span><br><span class="line">  <span class="attr">wordpress:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">wordpress:latest</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">wp_data:/var/www/html</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">80</span><span class="string">:80</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_HOST=db</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_USER=wordpress</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_PASSWORD=wordpress</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_NAME=wordpress</span></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">db_data:</span></span><br><span class="line">  <span class="attr">wp_data:</span></span><br></pre></td></tr></table></figure>

<p>run <code>docker compose up -d</code> from your project directory.</p>
<p>Bring up WordPress in a web browser<br>If you are using Docker Desktop for Mac or Docker Desktop for Windows, you can use <a target="_blank" rel="noopener" href="http://localhost/">http://localhost</a> as the IP address, and open <a target="_blank" rel="noopener" href="http://localhost/">http://localhost:80</a> in a web browser.</p>
<hr>
<p>phpmyadmin</p>
<p>All of the following examples will bring you phpMyAdmin on <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a> where you can enjoy your happy MySQL administration.</p>
<p>服务器：db</p>
<p>Usage with docker-compose and arbitrary server<br>This will run phpMyAdmin with the arbitrary server option - allowing you to specify any MySQL&#x2F;MariaDB server on the login page.</p>
<p>version: ‘3.1’</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">phpmyadmin:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">phpmyadmin</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8080</span><span class="string">:80</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">PMA_ARBITRARY=1</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Mount the volume containing your themes or plugins to the proper directory; and then apply them through the “wp-admin” UI. Ensure read&#x2F;write&#x2F;execute permissions are in place for the user:</p>
<p>Themes go in a subdirectory in &#x2F;var&#x2F;www&#x2F;html&#x2F;wp-content&#x2F;themes&#x2F;<br>Plugins go in a subdirectory in &#x2F;var&#x2F;www&#x2F;html&#x2F;wp-content&#x2F;plugins&#x2F;</p>
<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><p><code>docker run -d --name mysql_1 -p 3307:3306 -e TZ=Asia/Shanghai -e MYSQL_ROOT_PASSWORD=123 mysql</code></p>
<p><code>$ docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</code><br>… where <code>some-mysql</code> is the name you want to assign to your container, <code>my-secret-pw</code> is the password to be set for the MySQL <code>root</code> user and <code>tag</code> is the tag specifying the MySQL version you want.</p>
<hr>
<p>Using a custom MySQL configuration file</p>
<p>If <code>/my/custom/config-file.cnf</code> is the path and name of your custom configuration file, you can start your mysql container like this (note that only the directory path of the custom config file is used in this command):</p>
<p><code>$ docker run --name some-mysql -v /my/custom:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</code></p>
<p>This will start a new container some-mysql where the MySQL instance uses the combined startup settings from &#x2F;etc&#x2F;mysql&#x2F;my.cnf and &#x2F;etc&#x2F;mysql&#x2F;conf.d&#x2F;config-file.cnf, with settings from the latter taking precedence.</p>
<p>Configuration without a cnf file<br>Many configuration options can be passed as flags to mysqld. This will give you the flexibility to customize the container without needing a cnf file. For example, if you want to change the default encoding and collation for all tables to use UTF-8 (utf8mb4) just run the following:</p>
<p><code>$ docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</code></p>
<h2 id="docker-run-d"><a href="#docker-run-d" class="headerlink" title="docker run -d"></a>docker run -d</h2><p>-d<br>deamon后台服务</p>
<p>-p 宿主机端口:虚拟机端口<br>port<br>虚拟机端口取决于应用程序</p>
<p>-v 数据卷：容器目录<br>&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;<br>-v 宿主机目录：容器目录<br>volumn<br>双向映射</p>
<p><img src="/assets/images/docker/image-4.png" alt="Alt text"></p>
<p>-e KEY&#x3D;VALUE<br>environment</p>
<p>Repository:TAG</p>
<h2 id="volume"><a href="#volume" class="headerlink" title="volume"></a>volume</h2><p><img src="/assets/images/docker/image-3.png" alt="Alt text"></p>
<h3 id="mysql-1"><a href="#mysql-1" class="headerlink" title="mysql"></a>mysql</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name mysql \</span><br><span class="line">  -p 3306:3306 \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  -e MYSQL_ROOT_PASSWORD=123 \</span><br><span class="line">  -v /root/mysql/data:/var/lib/mysql \</span><br><span class="line">  -v /root/mysql/init:docker-entrypoint-initdb.d \</span><br><span class="line">  -v /root/mysql /conf:etc/mysql/conf.d \</span><br><span class="line">  mysql</span><br></pre></td></tr></table></figure>

<hr>
<p>If &#x2F;my&#x2F;custom&#x2F;config-file.cnf is the path and name of your custom configuration file, you can start your mysql container like this (note that only the directory path of the custom config file is used in this command):</p>
<p>$ docker run –name some-mysql -v &#x2F;my&#x2F;custom:&#x2F;etc&#x2F;mysql&#x2F;conf.d -e MYSQL_ROOT_PASSWORD&#x3D;my-secret-pw -d mysql:tag<br>This will start a new container some-mysql where the MySQL instance uses the combined startup settings from &#x2F;etc&#x2F;mysql&#x2F;my.cnf and &#x2F;etc&#x2F;mysql&#x2F;conf.d&#x2F;config-file.cnf, with settings from the latter taking precedence.</p>
<hr>
<p>Initializing a fresh instance<br>When a container is started for the first time, a new database with the specified name will be created and initialized with the provided configuration variables. Furthermore, it will execute files with extensions .sh, .sql and .sql.gz that are found in <code>/docker-entrypoint-initdb.d.</code> Files will be executed in alphabetical order.</p>
<hr>
<p>Create a data directory on a suitable volume on your host system, e.g. &#x2F;my&#x2F;own&#x2F;datadir.</p>
<p><code>$ docker run --name some-mysql -v /my/own/datadir:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</code></p>
<h2 id="-1"><a href="#-1" class="headerlink" title=""></a></h2><p><img src="/assets/images/docker/image-5.png" alt="Alt text"></p>
<p>openjdk:11.0-jre-buster</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">16</span>:<span class="number">04</span></span><br><span class="line"><span class="comment"># JDK安装目录</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_DIR=/usr/local</span><br><span class="line"><span class="comment"># copy jdk 和 java项目包</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./jdk8.tar.gz <span class="variable">$JAVA_DIR</span>/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./docker-demo.jar /tmp/app.jar</span></span><br><span class="line"><span class="comment"># install jdk</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">cd</span> <span class="variable">$JAVA_DIR</span> \ &amp;&amp; tar -xf ./jdk8.tar.gz \ &amp;&amp; <span class="built_in">mv</span> ./jdk1.8.0_144 ./java8</span></span><br><span class="line"><span class="comment"># environment variable</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME=$JAVA_DIR/JAVA8</span><br><span class="line"><span class="keyword">ENV</span> PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line"><span class="comment"># JAVA项目启动命令</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>, <span class="string">&quot;-jar&quot;</span>, <span class="string">&quot;/app.jar&quot;</span>]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">11.0</span>-jre-buster</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置系统时区</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> docker-demo.jar /app.jar</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>, <span class="string">&quot;-jar&quot;</span>, <span class="string">&quot;/app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p><code>docker build -t myImage:1.0 .</code><br>-t -&gt; 镜像起名<br>. -&gt; dock file所在目录</p>
<h2 id="network"><a href="#network" class="headerlink" title="network"></a>network</h2><p><img src="/assets/images/docker/image-6.png" alt="Alt text"></p>
<p>加入自定义网络的容器可以通过容器名互相访问</p>
<p><img src="/assets/images/docker/image-7.png" alt="Alt text"></p>
<p><code>docker run -d --name app_server_name --network custom_network_name docker_image_name</code></p>
</div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/0004%20Formal%20science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E6%8A%80%E6%9C%AF%20Computer%20science/Software%20organization/unix/Ubuntu%2018.04%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E6%BA%90%E4%B8%BA%E5%9B%BD%E5%86%85%E6%BA%90/"><i class="level-item fas fa-chevron-left"></i><span class="level-item"> </span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/0004%20Formal%20science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E6%8A%80%E6%9C%AF%20Computer%20science/Software%20organization/unix/intall%20Appache,PHP%20and%20MySQL%20on%20ubuntu/"><span class="level-item"> </span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/0001-Humanities/"><span class="level-start"><span class="level-item">0001 Humanities</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/0001-Humanities/%E5%8E%86%E5%8F%B2%E5%AD%A6-History/"><span class="level-start"><span class="level-item">历史学 History</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/0001-Humanities/%E8%89%BA%E6%9C%AF%E5%AD%A6-Arts/"><span class="level-start"><span class="level-item">艺术学 Arts</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/0002-Social-science/"><span class="level-start"><span class="level-item">0002 Social science</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/0002-Social-science/%E7%BB%8F%E6%B5%8E%E7%AE%A1%E7%90%86%E5%AD%A6-Business-and-Economics/"><span class="level-start"><span class="level-item">经济管理学 Business and Economics</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/0002-Social-science/%E8%AF%AD%E8%A8%80%E5%AD%A6-Linguistics-and-languages/"><span class="level-start"><span class="level-item">语言学 Linguistics and languages</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/0003-Natural-science/"><span class="level-start"><span class="level-item">0003 Natural science</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/0003-Natural-science/%E5%9C%B0%E7%90%83%E7%A7%91%E5%AD%A6-Earth-science/"><span class="level-start"><span class="level-item">地球科学 Earth science</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/0004-Formal-science/"><span class="level-start"><span class="level-item">0004 Formal science</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/0004-Formal-science/%E6%95%B0%E5%AD%A6-Mathematics/"><span class="level-start"><span class="level-item">数学 Mathematics</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/0004-Formal-science/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E6%8A%80%E6%9C%AF-Computer-science/"><span class="level-start"><span class="level-item">计算机科学技术 Computer science</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/0005-Applied-science/"><span class="level-start"><span class="level-item">0005 Applied science</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/0005-Applied-science/%E5%B7%A5%E7%A8%8B%E4%B8%8E%E6%8A%80%E6%9C%AF%E7%A7%91%E5%AD%A6-Engineering-and-technology/"><span class="level-start"><span class="level-item">工程与技术科学 Engineering and technology</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/0005-Applied-science/%E5%B7%A5%E7%A8%8B%E4%B8%8E%E6%8A%80%E6%9C%AF%E7%A7%91%E5%AD%A6-Engineering-and-technology/%E6%9C%BA%E6%A2%B0%E5%B7%A5%E7%A8%8B-Mechanical-engineering/"><span class="level-start"><span class="level-item">机械工程 Mechanical engineering</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/category1-level1/"><span class="level-start"><span class="level-item">category1 level1</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/category1-level1/category1-level2/"><span class="level-start"><span class="level-item">category1 level2</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/jekyll-update/"><span class="level-start"><span class="level-item">jekyll update</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><!--!--></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Lucfe Knowledges</a><p class="is-size-7"><span>&copy; 2024 lucfe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"></div></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>